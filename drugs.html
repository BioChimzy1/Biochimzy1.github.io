<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Drug Panel - Daliya Pvt Clinic</title>
  <link rel="stylesheet" href="./drugs.css">
</head>
<body>

  <!-- DRUG PANEL -->
  <div id="drug-panel" class="details-panel">
    <h2 id="panel-title">Drug Details</h2>
    <button id="close-panel" class="crud-button">Close</button>
    <button id="add-drug" class="crud-button">Add Drug</button>

    <!-- Search Input -->
    <input id="drug-search" placeholder="Search drugs by name, category, or strength...">

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Strength</th>
          <th>Price</th>
          <th>Category</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="panel-body"></tbody>
    </table>
  </div>

  <!-- MODAL -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <h3 id="modal-title">Add New Drug</h3>
      <input id="drug-name-input" placeholder="Drug name" />
      <input id="drug-strength-input" placeholder="Strength" />
      <input id="drug-price-input" placeholder="Price" type="number" />
      <select id="drug-category-input">
        <option value="">Select Category</option>
        <option value="Antibiotic Oral">Antibiotic Oral</option>
        <option value="NSAIDS">NSAIDS</option>
        <option value="Antihypertensive">Antihypertensive</option>
        <option value="Analgesic">Analgesic</option>
        <option value="Vitamins">Vitamins</option>
        <option value="Antibiotic Syrup">Antibiotic Syrup</option>
        <option value="Cough Syrup">Cough Syrup</option>
        <option value="Antihistamine Syrup">Antihistamine Syrup</option>
        <option value="Antibiotic Injectable">Antibiotic Injectable</option>
        <option value="Vitamin Injection">Vitamin Injection</option>
        <option value="Vaccine">Vaccine</option>
        <option value="Cream">Cream</option>
        <option value="Ointment">Ointment</option>
        <option value="Lotion">Lotion</option>
        <option value="Antibiotic Drops">Antibiotic Drops</option>
        <option value="Steroid Drops">Steroid Drops</option>
        <option value="Analgesic Suppository">Analgesic Suppository</option>
        <option value="Antibiotic Suppository">Antibiotic Suppository</option>
      </select>
      <div class="modal-actions">
        <button id="save-btn" class="save-btn">Save</button>
        <button id="cancel-btn" class="cancel-btn">Cancel</button>
      </div>
    </div>
  </div>

<!-- ================= FIREBASE CONFIGURATION ================= -->
<script type="module">
  // Firebase imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getDatabase } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBKITPwsPnysVklbCQVohpLHVdQvWeCE_c",
    authDomain: "clinicmanager-ae71a.firebaseapp.com",
    databaseURL: "https://clinicmanager-ae71a-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "clinicmanager-ae71a",
    storageBucket: "clinicmanager-ae71a.firebasestorage.app",
    messagingSenderId: "885164323964",
    appId: "1:885164323964:web:8d189888c139d3b9e045f9"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  window.db = getDatabase(app);
</script>

  <script src="./drugs.js" type="module"></script>

  <!-- Offline Support Script -->
  <script>
    // Online/Offline detection for drugs page
    window.addEventListener('online', function() {
      showDrugsStatus('Back online - Syncing data...', 'success');
    });

    window.addEventListener('offline', function() {
      showDrugsStatus('You are offline - Changes will sync when online', 'warning');
    });

    function showDrugsStatus(message, type) {
      const statusDiv = document.createElement('div');
      statusDiv.textContent = message;
      statusDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#4CAF50' : '#FF9800'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        font-family: Arial, sans-serif;
      `;
      
      document.body.appendChild(statusDiv);
      
      setTimeout(() => {
        statusDiv.remove();
      }, 3000);
    }

    // Check initial connection status
    if (!navigator.onLine) {
      showDrugsStatus('You are offline - using cached data', 'warning');
    }
  </script>
</body>
  </html>
